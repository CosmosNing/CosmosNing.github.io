---
title: 计算机组成原理复习笔记7-输入输出组织
toc: true
mathjax: true
date: 2019-10-15 12:17:34
description: 整理一下计算机组成原理中输入输出组织的知识
tags: 
- 计算机组成原理
categories: 
- 笔记
---

# 7．输入输出组织

## （×）I/O系统基本概念

（详见教材） 

## （★）常见外部设备

### 常见外部设备及其工作原理

（详见教材）

### 部分外部设备的性能指标

#### 显示器

* $VRAM\ 容量 = 分辨率\times 灰度级位数$
* $VRAM\ 带宽 =分辨率\times 灰度级位数\times 帧频$

#### 磁盘

* 外存容量：$面数\times 磁道数\times 道容量$
  * 其中，
    * $面数=2n-2$ ，n 为磁盘片数
    * $磁道数=\frac{道密度\times (D外-D内)}{2}$ ，D 为直径
    * $道容量=\pi D\times 位密度$

* （★★★★★★）存取速度（数据传输率）：$v=道容量\times 转速$
* （★★★★★★）存取时间
  * $T存取时间=T找道+T找扇区+T数据传输​$
$$
T_{找道}=\frac{T_{max}-T_{min}}{2}\\ T_{max}为最长找道时间，T_{min}为最短找道时间
$$

$$
T_{找扇区}=\frac{0+\frac{1}{n}}{2}\\ n为转速
$$

$$
T_{数据传输时间}=L\times \frac{1}{v}\\ L为数据量大小，v为数据传输率
$$



##  （★）I/O 接口

### 功能及基本结构

* 功能

  * 实现**主机和外设的通信**联络控制
  * 进行**地址译码**和**设备选择**
  * **数据缓冲**
  * **信号格式转换**（如串并转换）
  * **传送控制命令和状态信息**

* 基本结构

  ![I/O接口基本结构](https://raw.githubusercontent.com/CosmosNing/MyPicGo/master/images/2019/10/15/IO-Interface.png?raw=true)

### I/O 端口及其编址

* **I/O 端口**是指接口电路中可被 CPU 直接访问的**寄存器**，主要有**数据端口**、**状态端口**和**控制端口**
* **I/O 端口**和**I/O 接口**的关系：$I/O\ 端口 + 相应控制逻辑电路\overset{组成}{=} I/O\ 接口$
* I/O 端口编址方式
  * 统一编址
  * 独立编址

##  （★★★）I/O的三种控制方式

[回看操作系统相关知识](<https://cosmosning.github.io/2019/09/14/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B04-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/>)

### 程序查询方式

![I/O接口基本结构](https://raw.githubusercontent.com/CosmosNing/MyPicGo/master/images/2019/10/15/Prog-Query.png?raw=true)

### 中断方式

#### 中断的基本概念

（详见教材）

#### 中断工作流程

##### 中断响应（中断隐指令，硬件完成）

* 响应中断的 3 个条件
  1. CPU 处于 “开中断” 状态
  2. 至少要有一个未被屏蔽的中断请求
  3. 当前指令执行完
* 中断响应周期中完成以下几个操作
  1. **关中断**（将中断允许标志为“禁止”）
  2. **保存断点**
  3. **识别中断源并转中断服务程序**

##### 中断执行（中断程序完成）

* 接着中断响应周期的操作
  1. **保存现场和屏蔽字**
  2. **开中断**
  3. **执行中断服务程序**
  4. **关中断**
  5. **恢复现场和屏蔽字**
  6. **开中断、中断返回**

#### 多重中断和中断屏蔽

* 多重中断：中断内可以嵌套中断
* 中断屏蔽（见后解题技巧及重要结论中的总结）

### DMA 方式

#### DMA 控制器的组成

![I/O接口基本结构](https://raw.githubusercontent.com/CosmosNing/MyPicGo/master/images/2019/10/15/DMA-Controller.png?raw=true)

#### DMA 的传送过程

DMA 传送过程主要分为三步

1. 预处理
   * 准备内存区
   * 设置传送参数
   * 发送“启动 DMA ”命令，然后调度 CPU 执行其他进程
2. 数据传送
   * 整个数据传送过程由 DMA 单独完成
3. 后处理
   * 数据传输完成后，DMA 发出“ DMA 结束”给 CPU，转入中断服务程序，做一些数据校验等后处理工作

# 解题技巧及重要结论

* 显示器中的相关计算公式补充
  * $n=log_2(m)$ ，其中，m 为颜色数，n 为刷新存储器中存储单元的字长

* 磁盘相关计算公式补充
  * $数据传输率=转速(单位：*/s)\times 每个磁道的扇区数\times每个扇区上的数据量$

* 中断优先级和屏蔽字的相互确定
  * 依据优先级确定屏蔽字：依据优先级，某一级中断只能**屏蔽自己及比自己低优先级**的中断，故中断屏蔽字对应位数取 1 ，其他位取 0 。
  * 依据屏蔽字确定优先级：**比**屏蔽字的**二进制数据大小**，大的优先级高

# 参考资料

1. 计算机组成与系统结构.袁春风等
2. 2020年计算机组成原理考研复习指导.王道论坛